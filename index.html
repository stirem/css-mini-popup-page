<!DOCTYPE html>
<html>
<head>
	<title>mini-popup-page</title>
	<link rel="stylesheet" href="styles.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">
	<link rel="stylesheet" type='text/css' href="https://fonts.googleapis.com/css?family=Roboto:100,200,300,400,500,600,700,800,900">
</head>
<body>

<div class="content-wrap">
	<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam imperdiet arcu vitae quam tempor, id venenatis felis aliquet. In hac habitasse platea dictumst. Sed ut massa <a onClick="showBox( 1, this )" class="popup-link">blå</a>, faucibus odio et, convallis quam. Fusce dapibus, massa et elementum ultricies, lectus augue mollis odio, vitae feugiat risus ante quis mi. In dapibus odio non massa imperdiet, dictum venenatis leo tincidunt. In ut est erat. Cras sed nisl vel velit porttitor facilisis. Ut maximus, quam quis malesuada condimentum, tellus sem suscipit erat, eu maximus justo nisi non quam. Curabitur nec ligula dolor. Proin et porta ipsum, commodo semper orci. In ac sapien et ex cursus lacinia. Praesent vestibulum ornare risus eu imperdiet. Vivamus at tincidunt nunc. Nunc varius sit amet orci in vulputate. Fusce venenatis ante id quam volutpat pulvinar. Quisque non elementum urna. Quisque venenatis tristique sapien et imperdiet. Duis libero enim, consequat nec libero ut, condimentum aliquet dolor. Vestibulum dignissim lacus vitae porttitor porttitor. Morbi a lacinia nunc. Praesent volutpat in enim ut tincidunt. Maecenas ullamcorper mattis gravida. Suspendisse eu mi eget nisi convallis fermentum. Curabitur egestas turpis id orci euismod fermentum. Sed commodo egestas pulvinar. Nunc gravida orci dui, id bibendum quam feugiat quis. Phasellus placerat elementum dignissim. Aliquam malesuada interdum nisl, in hendrerit tortor vestibulum in. Vestibulum justo tortor, rhoncus fringilla pellentesque ac, egestas sit amet lectus. Aliquam vel metus eget purus aliquet iaculis non eu tortor. Suspendisse cursus metus nec feugiat gravida. Fusce cursus leo eu malesuada blandit. In in iaculis ante. Mauris in velit a elit euismod consequat in at lorem. Fusce suscipit non justo nec venenatis. Sed eu tempor nulla. Duis eget porttitor tortor, non vestibulum massa. Ut hendrerit vulputate sagittis. In diam sapien, dapibus eget urna a, fringilla luctus massa. Donec lacinia sollicitudin mi, quis euismod nisl bibendum quis. Nullam a risus vestibulum, dapibus sapien vel, consequat dui. Proin quis mauris lorem. Ut lacinia nunc quis blandit sodales. Aenean a viverra sem, et finibus lacus. Cras vehicula mauris magna, varius vestibulum elit venenatis et. Aenean mattis mauris et magna porttitor, at lobortis nibh sodales. Donec eu hendrerit eros, non auctor mi. Duis pellentesque leo id leo commodo suscipit. Duis interdum nunc ac orci sollicitudin blandit. Donec pulvinar eu eros et pellentesque. Mauris facilisis auctor elit tempus vulputate. Sed id massa ut nisl ultricies volutpat. Nullam tempor massa sem. Mauris egestas neque odio, sit amet luctus lectus efficitur nec. Quisque et est tincidunt, bibendum risus non, consectetur eros. Nullam at augue ac quam suscipit finibus nec vel libero. Nulla convallis aliquam turpis, vitae lobortis libero sodales sodales. Quisque sit amet ipsum ut libero congue viverra vitae a ante. Vestibulum erat mi, lobortis volutpat orci nec, rhoncus viverra orci.Morbi sodales felis at tempor. Nunc ut dolor congue, semper sapien ut, vestibulum erat. Fusce massa nunc, sodales ut dignissim placerat, ultrices id odio. In urna dolor, vestibulum in ultricies in, gravida eu dui. Nam porttitor libero. <a onClick="showBox( 2, this )" class="popup-link">grønne planter</a> ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Morbi sit amet tincidunt orci. Aliquam condimentum ligula mauris, vel <a class="external-link">sollicitudin</a> tortor feugiat et. Donec tincidunt tincidunt pellentesque.</p>

	<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam imperdiet arcu vitae quam tempor, id venenatis felis aliquet. In hac habitasse platea dictumst. Sed ut massa, faucibus odio et, convallis quam. Fusce dapibus, massa et elementum ultricies, lectus augue mollis odio, vitae feugiat risus ante quis mi. In dapibus odio non massa imperdiet, dictum venenatis leo tincidunt. In ut est erat. Cras sed nisl vel velit porttitor facilisis. Ut maximus, quam quis malesuada condimentum, tellus sem suscipit erat, eu maximus justo nisi non quam. Curabitur nec ligula dolor. Proin et porta ipsum, commodo semper orci. In ac sapien et ex cursus lacinia. Praesent vestibulum ornare risus eu imperdiet. Vivamus at tincidunt nunc. Nunc varius sit amet orci in vulputate. Fusce venenatis ante id quam volutpat pulvinar. Quisque non elementum urna. Quisque venenatis tristique sapien et imperdiet. Duis libero enim, consequat nec libero ut, condimentum aliquet dolor. Vestibulum dignissim lacus vitae porttitor porttitor. Morbi a lacinia nunc. Praesent volutpat in enim ut tincidunt. Maecenas ullamcorper mattis gravida. Suspendisse eu mi eget nisi convallis fermentum. Curabitur egestas turpis id orci euismod fermentum. Sed commodo egestas pulvinar. Nunc gravida orci dui, id bibendum quam feugiat quis. Phasellus placerat elementum dignissim. Aliquam malesuada interdum nisl, in hendrerit tortor vestibulum in. Vestibulum justo tortor, rhoncus fringilla pellentesque ac, egestas sit amet lectus. Aliquam vel metus eget purus aliquet iaculis non eu tortor. Suspendisse cursus metus nec feugiat gravida. Fusce cursus leo eu malesuada blandit. In in iaculis ante. Mauris in velit a elit euismod consequat in at lorem. Fusce suscipit non justo nec venenatis. Sed eu tempor nulla. Duis eget porttitor tortor, non vestibulum massa. Ut hendrerit vulputate sagittis. In diam sapien, dapibus eget urna a, fringilla luctus massa. Donec lacinia sollicitudin mi, quis euismod nisl bibendum quis. Nullam a risus vestibulum, dapibus sapien vel, consequat dui. Proin quis mauris lorem. Ut lacinia nunc quis blandit sodales. Aenean a viverra sem, et finibus lacus. Cras vehicula mauris magna, varius vestibulum elit venenatis et. Aenean mattis mauris et magna porttitor, at lobortis nibh sodales. Donec eu hendrerit eros, non auctor mi. Duis pellentesque leo id leo commodo suscipit. Duis interdum nunc ac orci sollicitudin blandit. Donec pulvinar eu eros et pellentesque. Mauris facilisis auctor elit tempus vulputate. Sed id massa ut nisl ultricies volutpat. Nullam tempor massa sem. Mauris egestas neque odio, sit amet luctus lectus efficitur nec. Quisque et est tincidunt, bibendum risus non, consectetur eros. Nullam at augue ac quam suscipit finibus nec vel libero. Nulla convallis aliquam turpis, vitae lobortis libero sodales sodales. Quisque sit amet ipsum ut libero congue viverra vitae a ante. Vestibulum erat mi, lobortis volutpat orci nec, rhoncus viverra orci.Morbi sodales felis at tempor. Nunc ut dolor congue, semper sapien ut, vestibulum erat. Fusce massa nunc, sodales ut dignissim placerat, ultrices id odio. In urna dolor, vestibulum in ultricies in, gravida eu dui. Nam porttitor libero. Ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Morbi sit amet tincidunt orci. Aliquam condimentum ligula mauris, vel tortor feugiat et. Donec tincidunt tincidunt pellentesque.</p>
</div>



<div class="popup-box">

	<div class="popup-box-arrow"></div>

	<img class="popup-image" src="sekiro.jpg">

	<div class="popup-text">
		<p>Duis imperdiet orci sit amet lectus varius condimentum. Sed a turpis eu tellus pellentesque vulputate sit amet at magna. Pellentesque vitae urna ut mauris tincidunt bibendum. Ut sed elit sem. Sed varius fermentum lobortis. Interdum et malesuada fames ac ante ipsum primis in faucibus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Nulla convallis arcu et efficitur varius. Nam fermentum facilisis leo, dapibus bibendum odio sodales malesuada.</p>
	</div>

	<div class="popup-goto-link-box">
		<a class="popup-goto-link" href="http://bek.no">VIS PROSJEKTSIDE</a>
	</div>
</div>




<script>


	var popup_goto_link_element = document.querySelector( '.popup-goto-link-box' );

	document.addEventListener( 'mousedown', function (event) {
	    if ( ! popup_goto_link_element.contains( event.target ) ) {
	        console.log('clicked outside');
	        document.querySelector( '.popup-box' ).style.display = "none";
	    }
	});

	document.addEventListener( "mouseup", function( event ) {
		getMousePos(event);
	});

	var mouseX;
	var mouseY;

	function getMousePos( e ) {
		mouseX = e.clientX;
		mouseY = e.clientY;
		console.log( mouseX );
		console.log( mouseY );
	}


	var string_ID;

	var string_alger = "Blåalger (Glaucophyta eller Glaucocystophyta) er en liten gruppe (rekke) av encellede planter (alger). Gruppen ble tidligere regnet som protozoer (urdyr) med innfangete kloroplaster fra cyanobakterier (blågrønnalger), men i nyere tid er det vist at de har ekte kloroplaster.[1] Disse er imidlertid primitive med rester av cyanobakterienes gram-negative cellevegg i behold. Plastiden er tydelig blågrønn, med fykocyanobilin dominerende over klorofyllet. Man kjenner kun få arter av blåalger, de lever i ferskvann.";
	var string_goto_link_alger = "https://no.wikipedia.org/wiki/Bl%C3%A5alger";

	var string_planter = "Grønne planter er en stor plantegruppe som omfatter både encellede og flercellede alger og landplanter. Felles for disse er grønnfargen, som kommer av at kloroplastene inneholder klorofylltypene a og b. Et ytterligere fellestrekk (homologi), som oppstod i stamarten til de grønne planter, er celleveggen. ";
	var string_goto_link_planter = "https://no.wikipedia.org/wiki/Gr%C3%B8nne_planter";


	function showBox( myID, element ) {

		string_ID = myID;

		if ( string_ID == 1 ) {
			document.querySelector( '.popup-text' ).innerHTML = string_alger;
			document.querySelector( '.popup-image' ).src = "alger.jpg";
			document.querySelector( '.popup-goto-link' ).href = string_goto_link_alger;
		} else if ( string_ID == 2 ) {
			document.querySelector( '.popup-text' ).innerHTML = string_planter;
			document.querySelector( '.popup-image' ).src = "planter.jpg";
			document.querySelector( '.popup-goto-link' ).href = string_goto_link_planter;
		}
		document.querySelector( '.popup-box' ).style.display = "block";

		var popup_box_element = document.querySelector( '.popup-box' );
		var elementRect = element.getBoundingClientRect();
  
		
		var popup_box_arrow_rect = document.querySelector( '.popup-box-arrow' ).getBoundingClientRect();
		console.log( "arrow width", popup_box_arrow_rect.width );

		if ( mouseX < window.innerWidth/2 ) {
			document.querySelector( '.popup-box' ).style.left = mouseX - (popup_box_arrow_rect.width/2) + 'px';
			document.querySelector( '.popup-box-arrow' ).style.left = 0;
		} else {
			document.querySelector( '.popup-box' ).style.left = mouseX - popup_box_element.getBoundingClientRect().width + (popup_box_arrow_rect.width/2) + 'px';
			document.querySelector( '.popup-box-arrow' ).style.left = popup_box_element.getBoundingClientRect().width - popup_box_arrow_rect.width + 'px';
		}

		if ( mouseY > window.innerHeight/2 ) {
			console.log( "arrow height: ", popup_box_arrow_rect.height );
			document.querySelector( '.popup-box' ).style.top = mouseY + window.scrollY - popup_box_element.getBoundingClientRect().height - popup_box_arrow_rect.height + 'px';
			document.querySelector( '.popup-box-arrow' ).style.top = popup_box_element.getBoundingClientRect().height + 'px';
			document.querySelector( '.popup-box-arrow' ).style.borderTop = "16px solid black";
			document.querySelector( '.popup-box-arrow' ).style.borderBottom = "0";
		} else {
			document.querySelector( '.popup-box' ).style.top = mouseY + window.scrollY + popup_box_arrow_rect.height + 'px';
			document.querySelector( '.popup-box-arrow' ).style.top = -16 + 'px';
			document.querySelector( '.popup-box-arrow' ).style.borderTop = "0";
			document.querySelector( '.popup-box-arrow' ).style.borderBottom = "16px solid black";
		}


	}

	// deal with the page getting resized or scrolled
	window.addEventListener( "scroll", updatePosition, false );
	window.addEventListener( "resize", updatePosition, false );

	function updatePosition() {
		// add your code to update the position when your browser
		// is resized or scrolled
	}

</script>


</body>
</html>

